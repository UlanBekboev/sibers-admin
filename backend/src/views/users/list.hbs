<h1>User List</h1>

<p><a href="/add-user">Add New User</a></p>

<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th><a href="/users?sort=username&order={{toggleOrder sortOrder}}">Username</a></th>
      <th><a href="/users?sort=first_name&order={{toggleOrder sortOrder}}">First Name</a></th>
      <th>Last Name</th>
      <th>Gender</th>
      <th><a href="/users?sort=birthdate&order={{toggleOrder sortOrder}}">Birthdate</a></th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {{#each users}}
      <tr>
        <td>{{this.username}}</td>
        <td>{{this.firstName}}</td>
        <td>{{this.lastName}}</td>
        <td>{{this.gender}}</td>
        <td>{{this.birthdate}}</td>
        <td>
          <a href="/users/{{this.id}}">View</a> |
          <a href="/users/{{this.id}}/edit">Edit</a> |
          <form action="/users/{{this.id}}/delete" method="POST" style="display:inline;">
            <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
          </form>
        </td>
      </tr>
    {{/each}}
  </tbody>
</table>

<div style="margin-top:20px;">
  {{#if (gt totalPages 1)}}
    {{#each (range 1 totalPages)}}
      <a href="/users?page={{this}}&sort={{../sortField}}&order={{../sortOrder}}"
         style="margin-right: 8px; {{#if (eq this ../currentPage)}}font-weight:bold;{{/if}}">
        {{this}}
      </a>
    {{/each}}
  {{/if}}
</div>